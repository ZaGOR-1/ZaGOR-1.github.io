# ‚úÖ Cashflow Period Filters - –ì–æ—Ç–æ–≤–æ!

## üéØ –©–æ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ

–î–æ–¥–∞–Ω–æ –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å –≤–∏–±–æ—Ä—É –ø–µ—Ä—ñ–æ–¥—É –¥–ª—è –≥—Ä–∞—Ñ—ñ–∫–∞ Cashflow –Ω–∞ dashboard.

## üìä –î–æ—Å—Ç—É–ø–Ω—ñ –ø–µ—Ä—ñ–æ–¥–∏

- **7 –¥–Ω—ñ–≤** - –ø–æ–≥–æ–¥–∏–Ω–Ω–∞ –¥–µ—Ç–∞–ª—ñ–∑–∞—Ü—ñ—è –æ—Å—Ç–∞–Ω–Ω—ñ—Ö 7 –¥–Ω—ñ–≤
- **14 –¥–Ω—ñ–≤** - –ø–æ–≥–æ–¥–∏–Ω–Ω–∞ –¥–µ—Ç–∞–ª—ñ–∑–∞—Ü—ñ—è –æ—Å—Ç–∞–Ω–Ω—ñ—Ö 2 —Ç–∏–∂–Ω—ñ–≤
- **30 –¥–Ω—ñ–≤** - –ø–æ–≥–æ–¥–∏–Ω–Ω–∞ –¥–µ—Ç–∞–ª—ñ–∑–∞—Ü—ñ—è –æ—Å—Ç–∞–Ω–Ω—å–æ–≥–æ –º—ñ—Å—è—Ü—è
- **3 –º—ñ—Å—è—Ü—ñ** - –ø–æ–º—ñ—Å—è—á–Ω–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞ 3 –º—ñ—Å—è—Ü—ñ
- **6 –º—ñ—Å—è—Ü—ñ–≤** - –ø–æ–º—ñ—Å—è—á–Ω–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞ –ø—ñ–≤—Ä–æ–∫—É (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º)

## üîß –¢–µ—Ö–Ω—ñ—á–Ω—ñ –∑–º—ñ–Ω–∏

### 1. Backend (`app/Services/StatsService.php`)

#### –û–Ω–æ–≤–ª–µ–Ω–æ –º–µ—Ç–æ–¥ `getCashflow()`
```php
// –ë—É–ª–æ:
public function getCashflow(int $userId, int $months = 6): array

// –°—Ç–∞–ª–æ:
public function getCashflow(int $userId, string $period = '6m'): array
```

#### –î–æ–¥–∞–Ω–æ –Ω–æ–≤—ñ –º–µ—Ç–æ–¥–∏:
- `parsePeriod(string $period)` - –ø–∞—Ä—Å–∏–Ω–≥ –ø–µ—Ä—ñ–æ–¥—É ('7d', '14d', '30d', '3m', '6m')
- `generateDayIntervals(int $days)` - –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è —ñ–Ω—Ç–µ—Ä–≤–∞–ª—ñ–≤ –ø–æ –¥–Ω—è—Ö
- `generateMonthIntervals(int $months)` - –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è —ñ–Ω—Ç–µ—Ä–≤–∞–ª—ñ–≤ –ø–æ –º—ñ—Å—è—Ü—è—Ö

#### –õ–æ–≥—ñ–∫–∞ –≥—Ä—É–ø—É–≤–∞–Ω–Ω—è:
- **7d, 14d, 30d**: –≥—Ä—É–ø—É–≤–∞–Ω–Ω—è –ø–æ –¥–Ω—è—Ö (YYYY-MM-DD)
- **3m, 6m**: –≥—Ä—É–ø—É–≤–∞–Ω–Ω—è –ø–æ –º—ñ—Å—è—Ü—è—Ö (YYYY-MM)

### 2. API Controller (`app/Http/Controllers/Api/StatsController.php`)

#### –û–Ω–æ–≤–ª–µ–Ω–æ endpoint `/api/v1/stats/cashflow`

**–ë—É–ª–æ:**
```php
GET /api/v1/stats/cashflow?months=6
```

**–°—Ç–∞–ª–æ:**
```php
GET /api/v1/stats/cashflow?period=6m
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä–∏:**
- `period` (optional): '7d', '14d', '30d', '3m', '6m'
- –ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º: '6m'

**–í—ñ–¥–ø–æ–≤—ñ–¥—å:**
```json
{
  "success": true,
  "data": {
    "cashflow": [
      {
        "period": "04 –ñ–æ–≤", // –¥–ª—è –¥–Ω—ñ–≤
        "income": 5000,
        "expense": 300
      }
    ],
    "period": "7d"
  }
}
```

### 3. Frontend (`resources/views/dashboard/index.blade.php`)

#### –î–æ–¥–∞–Ω–æ UI —Ñ—ñ–ª—å—Ç—Ä –ø–µ—Ä—ñ–æ–¥—ñ–≤

```html
<div class="flex gap-1 bg-gray-200 dark:bg-gray-700 rounded-lg p-1">
    <button onclick="changeCashflowPeriod('7d')" class="period-btn">7–¥</button>
    <button onclick="changeCashflowPeriod('14d')" class="period-btn">14–¥</button>
    <button onclick="changeCashflowPeriod('30d')" class="period-btn">30–¥</button>
    <button onclick="changeCashflowPeriod('3m')" class="period-btn">3–º</button>
    <button onclick="changeCashflowPeriod('6m')" class="period-btn active">6–º</button>
</div>
```

#### –î–æ–¥–∞–Ω–æ JavaScript —Ñ—É–Ω–∫—Ü—ñ—ó:
- `loadCashflowData(period)` - –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö –¥–ª—è –æ–±—Ä–∞–Ω–æ–≥–æ –ø–µ—Ä—ñ–æ–¥—É
- `changeCashflowPeriod(period)` - –∑–º—ñ–Ω–∞ –ø–µ—Ä—ñ–æ–¥—É (–æ–Ω–æ–≤–ª—é—î UI + –ø–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂—É—î –¥–∞–Ω—ñ)

#### –î–∏–Ω–∞–º—ñ—á–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –≥—Ä–∞—Ñ—ñ–∫–∞:
- –ü—Ä–∏ –∑–º—ñ–Ω—ñ –ø–µ—Ä—ñ–æ–¥—É —Å—Ç–∞—Ä–∏–π Chart.js –∑–Ω–∏—â—É—î—Ç—å—Å—è
- –°—Ç–≤–æ—Ä—é—î—Ç—å—Å—è –Ω–æ–≤–∏–π –∑ –æ–Ω–æ–≤–ª–µ–Ω–∏–º–∏ –¥–∞–Ω–∏–º–∏
- –ú—ñ—Ç–∫–∏ –æ—Å—ñ X –∑–º—ñ–Ω—é—é—Ç—å—Å—è: "04 –ñ–æ–≤" –¥–ª—è –¥–Ω—ñ–≤, "–ñ–æ–≤ 2025" –¥–ª—è –º—ñ—Å—è—Ü—ñ–≤

### 4. CSS —Å—Ç–∏–ª—ñ

```css
.period-btn {
    transition: all 0.2s ease;
}

.period-btn:not(.bg-blue-600) {
    color: #374151; /* gray-700 */
}

.period-btn:not(.bg-blue-600):hover {
    background-color: #e5e7eb; /* gray-200 */
}
```

## üß™ –¢–µ—Å—Ç–æ–≤—ñ –¥–∞–Ω—ñ

–°—Ç–≤–æ—Ä–µ–Ω–æ —Å–∫—Ä–∏–ø—Ç `scripts/setup/create-period-test-data.php` –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó —Ç–µ—Å—Ç–æ–≤–∏—Ö –¥–∞–Ω–∏—Ö:

- **24 —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó** —Ä–æ–∑–ø–æ–¥—ñ–ª–µ–Ω—ñ –ø–æ 6 –º—ñ—Å—è—Ü—è—Ö
- –î–æ—Ö–æ–¥–∏ —Ç–∞ –≤–∏—Ç—Ä–∞—Ç–∏ –≤ UAH, USD, PLN
- –†—ñ–≤–Ω–æ–º—ñ—Ä–Ω–∏–π —Ä–æ–∑–ø–æ–¥—ñ–ª –ø–æ –¥–Ω—è—Ö —Ç–∞ –º—ñ—Å—è—Ü—è—Ö

```bash
php scripts/setup/create-period-test-data.php
```

**–†–æ–∑–ø–æ–¥—ñ–ª:**
- 7 –¥–Ω—ñ–≤: 4 —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó
- 14 –¥–Ω—ñ–≤: 8 —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ–π
- 30 –¥–Ω—ñ–≤: 12 —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ–π
- 3 –º—ñ—Å—è—Ü—ñ: 18 —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ–π
- 6 –º—ñ—Å—è—Ü—ñ–≤: 24 —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó

## üìä –Ø–∫ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏

### –î–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞:

1. –í—ñ–¥–∫—Ä–∏—Ç–∏ dashboard: http://localhost:8000/dashboard
2. –ó–Ω–∞–π—Ç–∏ —Å–µ–∫—Ü—ñ—é "üìà Cashflow"
3. –ù–∞—Ç–∏—Å–Ω—É—Ç–∏ –Ω–∞ –ø–æ—Ç—Ä—ñ–±–Ω–∏–π –ø–µ—Ä—ñ–æ–¥: 7–¥, 14–¥, 30–¥, 3–º, –∞–±–æ 6–º
4. –ì—Ä–∞—Ñ—ñ–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –æ–Ω–æ–≤–∏—Ç—å—Å—è

### –î–ª—è —Ä–æ–∑—Ä–æ–±–Ω–∏–∫–∞:

```javascript
// –ü—Ä–æ–≥—Ä–∞–º–Ω–æ –∑–º—ñ–Ω–∏—Ç–∏ –ø–µ—Ä—ñ–æ–¥
changeCashflowPeriod('30d');

// –ü–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –ø–æ—Ç–æ—á–Ω–∏–π –ø–µ—Ä—ñ–æ–¥
loadCashflowData(currentPeriod);
```

## üé® UI/UX

### –ê–∫—Ç–∏–≤–Ω–∞ –∫–Ω–æ–ø–∫–∞:
- **–ö–æ–ª—ñ—Ä**: –°–∏–Ω—ñ–π (#2563eb)
- **–¢–µ–∫—Å—Ç**: –ë—ñ–ª–∏–π
- **–ê–Ω—ñ–º–∞—Ü—ñ—è**: –ü–ª–∞–≤–Ω–∏–π –ø–µ—Ä–µ—Ö—ñ–¥ 0.2s

### –ù–µ–∞–∫—Ç–∏–≤–Ω–∞ –∫–Ω–æ–ø–∫–∞:
- **–ö–æ–ª—ñ—Ä**: –°—ñ—Ä–∏–π
- **Hover**: –¢–µ–º–Ω—ñ—à–µ —Å—ñ—Ä–∏–π
- **–ê–Ω—ñ–º–∞—Ü—ñ—è**: –ü–ª–∞–≤–Ω–∏–π –ø–µ—Ä–µ—Ö—ñ–¥

### –¢–µ–º–Ω–∞ —Ç–µ–º–∞:
- –ö–Ω–æ–ø–∫–∏ –∞–¥–∞–ø—Ç–æ–≤–∞–Ω—ñ –¥–ª—è dark mode
- –ì—Ä–∞—Ñ—ñ–∫ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î —Ç–µ–º–Ω—ñ –∫–æ–ª—å–æ—Ä–∏ —Å—ñ—Ç–∫–∏
- –ú—ñ—Ç–∫–∏ –≤ —Å—ñ—Ä–∏—Ö —Ç–æ–Ω–∞—Ö

## üîç –ü—Ä–∏–∫–ª–∞–¥–∏ API –∑–∞–ø–∏—Ç—ñ–≤

### 7 –¥–Ω—ñ–≤
```bash
curl -H "Authorization: Bearer YOUR_TOKEN" \
  "http://localhost:8000/api/v1/stats/cashflow?period=7d"
```

### 3 –º—ñ—Å—è—Ü—ñ
```bash
curl -H "Authorization: Bearer YOUR_TOKEN" \
  "http://localhost:8000/api/v1/stats/cashflow?period=3m"
```

## ‚úÖ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

### 1. –§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ —Ç–µ—Å—Ç–∏
```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —â–æ API –ø—Ä–∏–π–º–∞—î –≤—Å—ñ –ø–µ—Ä—ñ–æ–¥–∏
php artisan test --filter CashflowTest
```

### 2. –†—É—á–Ω–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è
1. ‚úÖ –ü–µ—Ä–µ–º–∏–∫–∞–Ω–Ω—è –º—ñ–∂ –ø–µ—Ä—ñ–æ–¥–∞–º–∏
2. ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ñ—Å—Ç—å –¥–∞–Ω–∏—Ö –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –ø–µ—Ä—ñ–æ–¥—É
3. ‚úÖ Responsive design –Ω–∞ –º–æ–±—ñ–ª—å–Ω–∏—Ö
4. ‚úÖ –¢–µ–º–Ω–∞/—Å–≤—ñ—Ç–ª–∞ —Ç–µ–º–∞
5. ‚úÖ –ê–Ω—ñ–º–∞—Ü—ñ—ó —Ç–∞ –ø–µ—Ä–µ—Ö–æ–¥–∏

### 3. –ë—Ä–∞—É–∑–µ—Ä–Ω–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è
```bash
# –°—Ç–≤–æ—Ä–∏—Ç–∏ —Ç–µ—Å—Ç–æ–≤—ñ –¥–∞–Ω—ñ
php scripts/setup/create-period-test-data.php

# –í—ñ–¥–∫—Ä–∏—Ç–∏ dashboard
# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –∫–æ–∂–µ–Ω –ø–µ—Ä—ñ–æ–¥
```

## üìà –ü–æ–∫—Ä–∞—â–µ–Ω–Ω—è –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ

- –ö–µ—à—É–≤–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö –Ω–∞ –∫–ª—ñ—î–Ω—Ç—ñ (–Ω–µ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ)
- Debounce –¥–ª—è —à–≤–∏–¥–∫–∏—Ö –∫–ª—ñ–∫—ñ–≤ (–Ω–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ - –æ–¥–Ω–∞ –ø–æ–¥—ñ—è)
- –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è SQL –∑–∞–ø–∏—Ç—ñ–≤ (GROUP BY –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î —ñ–Ω–¥–µ–∫—Å–∏)

## üîÆ –ú–æ–∂–ª–∏–≤—ñ –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è

### –î–æ–¥–∞—Ç–∫–æ–≤—ñ –ø–µ—Ä—ñ–æ–¥–∏:
- [ ] "–¶–µ–π –º—ñ—Å—è—Ü—å"
- [ ] "–ú–∏–Ω—É–ª–∏–π –º—ñ—Å—è—Ü—å"
- [ ] "–¶–µ–π —Ä—ñ–∫"
- [ ] Custom range (date picker)

### UI –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è:
- [ ] Loader –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ
- [ ] Smooth transition –º—ñ–∂ –≥—Ä–∞—Ñ—ñ–∫–∞–º–∏
- [ ] Tooltip –∑ –¥–µ—Ç–∞–ª—è–º–∏
- [ ] –ï–∫—Å–ø–æ—Ä—Ç –≥—Ä–∞—Ñ—ñ–∫–∞ –≤ PNG/PDF

### Backend:
- [ ] –ö–µ—à—É–≤–∞–Ω–Ω—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤ –Ω–∞ 1 –≥–æ–¥–∏–Ω—É
- [ ] Pagination –¥–ª—è –≤–µ–ª–∏–∫–∏—Ö –¥–∞—Ç–∞—Å–µ—Ç—ñ–≤
- [ ] –ê–≥—Ä–µ–≥–∞—Ü—ñ—è –ø–æ —Ç–∏–∂–Ω—è—Ö

## üìù –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è

### API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è
–û–Ω–æ–≤–∏—Ç–∏ `docs/api-contracts.md`:
```markdown
#### GET /api/v1/stats/cashflow
–û—Ç—Ä–∏–º–∞—Ç–∏ cashflow –∑–∞ –æ–±—Ä–∞–Ω–∏–π –ø–µ—Ä—ñ–æ–¥.

**Query Parameters:**
- `period` (string, optional): '7d', '14d', '30d', '3m', '6m'
  Default: '6m'
```

### User guide
–î–æ–¥–∞—Ç–∏ –≤ README:
```markdown
## Cashflow –∞–Ω–∞–ª—ñ—Ç–∏–∫–∞

Dashboard –Ω–∞–¥–∞—î –≥–Ω—É—á–∫–∏–π cashflow –∞–Ω–∞–ª—ñ–∑ –∑ –≤–∏–±–æ—Ä–æ–º –ø–µ—Ä—ñ–æ–¥—É:
- 7 –¥–Ω—ñ–≤ - –¥–µ—Ç–∞–ª—å–Ω–∞ —â–æ–¥–µ–Ω–Ω–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- 14 –¥–Ω—ñ–≤ - –¥–≤–æ—Ç–∏–∂–Ω–µ–≤–∞ –¥–∏–Ω–∞–º—ñ–∫–∞
- 30 –¥–Ω—ñ–≤ - –º—ñ—Å—è—á–Ω–∏–π –æ–≥–ª—è–¥
- 3 –º—ñ—Å—è—Ü—ñ - –∫–≤–∞—Ä—Ç–∞–ª—å–Ω–∏–π –∞–Ω–∞–ª—ñ–∑
- 6 –º—ñ—Å—è—Ü—ñ–≤ - –ø—ñ–≤—Ä—ñ—á–Ω–∏–π —Ç—Ä–µ–Ω–¥
```

---

**–î–∞—Ç–∞**: 06.10.2025  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ì–û–¢–û–í–û  
**–ü—Ä–æ—Ç–µ—Å—Ç–æ–≤–∞–Ω–æ**: ‚úÖ Backend + Frontend  
**–¢–µ—Å—Ç–æ–≤—ñ –¥–∞–Ω—ñ**: ‚úÖ 24 —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó —Å—Ç–≤–æ—Ä–µ–Ω–æ

üéâ –§—ñ–ª—å—Ç—Ä–∏ –ø–µ—Ä—ñ–æ–¥—ñ–≤ Cashflow –ø–æ–≤–Ω—ñ—Å—Ç—é –ø—Ä–∞—Ü—é—é—Ç—å!
