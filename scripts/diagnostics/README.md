# üîç Diagnostics Scripts

–°–∫—Ä–∏–ø—Ç–∏ –¥–ª—è –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ —Å–∏—Å—Ç–µ–º–∏, –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—ñ–≤ —Ç–∞ –≤–∏—è–≤–ª–µ–Ω–Ω—è –ø—Ä–æ–±–ª–µ–º.

## üìã –°–ø–∏—Å–æ–∫ —Å–∫—Ä–∏–ø—Ç—ñ–≤

### `verify-dashboard.php` ‚≠ê (–ì–æ–ª–æ–≤–Ω–∏–π)
–ö–æ–º–ø–ª–µ–∫—Å–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—ñ–≤ dashboard - –ø–æ—Ä—ñ–≤–Ω—é—î —Ä—É—á–Ω—ñ –ø—ñ–¥—Ä–∞—Ö—É–Ω–∫–∏ –∑ API.

```bash
php diagnostics/verify-dashboard.php
```

**–ü–µ—Ä–µ–≤—ñ—Ä—è—î:**
- ‚úÖ –í—Å—ñ —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
- ‚úÖ –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü—ñ—é –≤–∞–ª—é—Ç
- ‚úÖ –†–æ–∑—Ä–∞—Ö—É–Ω–∫–∏ –¥–æ—Ö–æ–¥—ñ–≤ —Ç–∞ –≤–∏—Ç—Ä–∞—Ç
- ‚úÖ –í—ñ–¥–ø–æ–≤—ñ–¥–Ω—ñ—Å—Ç—å –∑ StatsService API
- ‚úÖ –¢–æ—á–Ω—ñ—Å—Ç—å –±–∞–ª–∞–Ω—Å—É

**–í–∏–≤—ñ–¥:**
```
üìä –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—ñ–≤ –¥–æ—Ö–æ–¥—ñ–≤/–≤–∏—Ç—Ä–∞—Ç
======================================================================
üë§ –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á: Test User
üí± –ë–∞–∑–æ–≤–∞ –≤–∞–ª—é—Ç–∞: UAH

üìã –¢—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó:
----------------------------------------------------------------------
üìà 2025-10-06 20:10 | 2,400.00 PLN | –ó–∞—Ä–ø–ª–∞—Ç–∞ |
   ‚Üí –î–æ—Ö—ñ–¥: 25200.00 UAH

======================================================================
üí∞ –ó–∞–≥–∞–ª—å–Ω–∏–π –¥–æ—Ö—ñ–¥:    25,200.00 UAH
üí∏ –ó–∞–≥–∞–ª—å–Ω—ñ –≤–∏—Ç—Ä–∞—Ç–∏:   0.00 UAH
üìä –ë–∞–ª–∞–Ω—Å:             25,200.00 UAH

----------------------------------------------------------------------
üîç –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —á–µ—Ä–µ–∑ StatsService:
API –î–æ—Ö—ñ–¥:    25,200.00 UAH
‚úÖ –î–æ—Ö–æ–¥–∏ –∑–±—ñ–≥–∞—é—Ç—å—Å—è!
‚úÖ –í–∏—Ç—Ä–∞—Ç–∏ –∑–±—ñ–≥–∞—é—Ç—å—Å—è!
```

### `calculate-income.php`
–†—É—á–Ω–∏–π —Ä–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –¥–æ—Ö–æ–¥—ñ–≤ –∑ –¥–µ—Ç–∞–ª—ñ–∑–∞—Ü—ñ—î—é –ø–æ –∫–æ–∂–Ω—ñ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó.

```bash
php diagnostics/calculate-income.php
```

**–ü–æ–∫–∞–∑—É—î:**
- –ö–æ–∂–Ω—É —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—é –∑ –¥–µ—Ç–∞–ª—è–º–∏
- –û—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω—É –≤–∞–ª—é—Ç—É —Ç–∞ —Å—É–º—É
- –ö–æ–Ω–≤–µ—Ä—Ç–æ–≤–∞–Ω—É —Å—É–º—É –≤ –±–∞–∑–æ–≤—É –≤–∞–ª—é—Ç—É
- –ü—ñ–¥—Å—É–º–∫–æ–≤—ñ –¥–æ—Ö–æ–¥–∏/–≤–∏—Ç—Ä–∞—Ç–∏

### `diagnose-transaction.php`
–î–µ—Ç–∞–ª—å–Ω–∞ –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ—ó —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó.

```bash
php diagnostics/diagnose-transaction.php
```

**–ê–Ω–∞–ª—ñ–∑—É—î:**
- –î–∞–Ω—ñ —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó
- –ö—É—Ä—Å –æ–±–º—ñ–Ω—É –Ω–∞ –¥–∞—Ç—É
- –ö–æ–Ω–≤–µ—Ä—Ç–æ–≤–∞–Ω—É —Å—É–º—É
- –ö–∞—Ç–µ–≥–æ—Ä—ñ—é —Ç–∞ —Ç–∏–ø
- –ß–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –≤—Ä–∞—Ö–æ–≤—É—î—Ç—å—Å—è –≤ —Å—Ç–∞—Ç–∏—Å—Ç–∏—Ü—ñ

### `test-api.php`
–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Ä–æ–±–æ—Ç—É REST API endpoints.

```bash
php diagnostics/test-api.php
```

**–¢–µ—Å—Ç—É—î:**
- `/api/v1/stats/overview`
- `/api/v1/stats/cashflow`
- `/api/v1/stats/category-breakdown`
- –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—é —á–µ—Ä–µ–∑ Sanctum
- –§–æ—Ä–º–∞—Ç –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π JSON

### `test-currency-selector.php` üÜï
–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –≤–∏–±—ñ—Ä –≤–∞–ª—é—Ç–∏ –≤ Cashflow —Ç–∞ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü—ñ—é.

```bash
php diagnostics/test-currency-selector.php
```

**–¢–µ—Å—Ç—É—î:**
- Cashflow –≤ —Ä—ñ–∑–Ω–∏—Ö –≤–∞–ª—é—Ç–∞—Ö (UAH, USD, PLN)
- –í—Å—ñ –ø–µ—Ä—ñ–æ–¥–∏ (7d, 14d, 30d, 3m, 6m)
- –¢–æ—á–Ω—ñ—Å—Ç—å –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü—ñ—ó –≤–∞–ª—é—Ç
- –ü—Ä–∞–≤–∏–ª—å–Ω—ñ—Å—Ç—å –∫—É—Ä—Å—ñ–≤ –æ–±–º—ñ–Ω—É

**–í–∏–≤—ñ–¥:**
```
üí± –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –≤–∞–ª—é—Ç–∏: USD
üìÖ –ü–µ—Ä—ñ–æ–¥: 30d
üíµ –í–∞–ª—é—Ç–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ: USD
üìà –ó–∞–≥–∞–ª—å–Ω—ñ –¥–æ—Ö–æ–¥–∏: 798.23 $
üìâ –ó–∞–≥–∞–ª—å–Ω—ñ –≤–∏—Ç—Ä–∞—Ç–∏: 37.53 $
üí∞ –ë–∞–ª–∞–Ω—Å: 760.70 $
```

### `check-time.php`
–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —á–∞—Å–æ–≤–∏–π –ø–æ—è—Å —Ç–∞ —Ñ–æ—Ä–º–∞—Ç –¥–∞—Ç —É —Å–∏—Å—Ç–µ–º—ñ.

```bash
php diagnostics/check-time.php
```

**–ü–µ—Ä–µ–≤—ñ—Ä—è—î:**
- Timezone –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é (–º–∞—î –±—É—Ç–∏ Europe/Kyiv)
- –ü–æ—Ç–æ—á–Ω–∏–π —á–∞—Å —Å–µ—Ä–≤–µ—Ä–∞
- –§–æ—Ä–º–∞—Ç –¥–∞—Ç —É —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—è—Ö
- –†—ñ–∑–Ω–∏—Ü—é –∑ UTC

## üéØ –¢–∏–ø–æ–≤—ñ —Å—Ü–µ–Ω–∞—Ä—ñ—ó –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

### –ü—Ä–æ–±–ª–µ–º–∞: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ñ —Å—É–º–∏ –Ω–∞ dashboard
```bash
# 1. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü—ñ—é –≤–∞–ª—é—Ç
php ../currency/check-rates.php

# 2. –û—á–∏—Å—Ç–∏—Ç–∏ –∫–µ—à
php ../currency/clear-rates-cache.php

# 3. –î—ñ–∞–≥–Ω–æ—Å—Ç—É–≤–∞—Ç–∏ dashboard
php diagnostics/verify-dashboard.php
```

### –ü—Ä–æ–±–ª–µ–º–∞: –¢—Ä–∞–Ω–∑–∞–∫—Ü—ñ—è –Ω–µ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î—Ç—å—Å—è
```bash
# 1. –ó–Ω–∞–π—Ç–∏ ID —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó —É –ë–î –∞–±–æ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ñ
# 2. –î—ñ–∞–≥–Ω–æ—Å—Ç—É–≤–∞—Ç–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—é
php diagnostics/diagnose-transaction.php

# 3. –ü–µ—Ä–µ—Ä–∞—Ö—É–≤–∞—Ç–∏ –¥–æ—Ö–æ–¥–∏
php diagnostics/calculate-income.php
```

### –ü—Ä–æ–±–ª–µ–º–∞: API –ø–æ–≤–µ—Ä—Ç–∞—î –ø–æ–º–∏–ª–∫–∏
```bash
# 1. –¢–µ—Å—Ç—É–≤–∞—Ç–∏ API endpoints
php diagnostics/test-api.php

# 2. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ª–æ–≥–∏
tail -f storage/logs/laravel.log
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏–π —á–∞—Å —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ–π
```bash
# 1. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ timezone
php diagnostics/check-time.php

# 2. –Ø–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ - –∑–º—ñ–Ω–∏—Ç–∏ –≤ .env
APP_TIMEZONE=Europe/Kyiv

# 3. –û—á–∏—Å—Ç–∏—Ç–∏ –∫–µ—à –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó
php artisan config:clear
```

## üîß –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –≤–ª–∞—Å–Ω–æ–≥–æ –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏—á–Ω–æ–≥–æ —Å–∫—Ä–∏–ø—Ç—É

```php
<?php

require __DIR__ . '/../../vendor/autoload.php';

$app = require_once __DIR__ . '/../../bootstrap/app.php';
$kernel = $app->make(Illuminate\Contracts\Console\Kernel::class);
$kernel->bootstrap();

// –í–∞—à –∫–æ–¥ –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ —Ç—É—Ç
echo "üîç –î—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞...\n";

// –ü—Ä–∏–∫–ª–∞–¥: –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ–π
$count = DB::table('transactions')->count();
echo "üìä –¢—Ä–∞–Ω–∑–∞–∫—Ü—ñ–π —É –ë–î: {$count}\n";
```

## üìä –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥

–î–ª—è production —Ä–µ–∫–æ–º–µ–Ω–¥—É—î—Ç—å—Å—è:
- –†–µ–≥—É–ª—è—Ä–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç–∏ `verify-dashboard.php`
- –õ–æ–≥—É–≤–∞—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏
- –ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ alerts –ø—Ä–∏ –Ω–µ–≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ—Å—Ç—è—Ö

```bash
# –ü—Ä–∏–∫–ª–∞–¥ cron –¥–ª—è –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É (–∫–æ–∂–Ω—É –≥–æ–¥–∏–Ω—É)
0 * * * * cd /path/to/project && php scripts/diagnostics/verify-dashboard.php >> /var/log/finance-tracker-diagnostics.log 2>&1
```

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è

–Ü—Å—Ç–æ—Ä—ñ—è –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–∏—Ö –ø—Ä–æ–±–ª–µ–º: `docs/archive/DIAGNOSTICS.md`
