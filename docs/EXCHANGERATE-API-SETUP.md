# üéØ ExchangeRate-API Integration - –ü—ñ–¥—Å—É–º–æ–∫

## ‚úÖ –©–æ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ

### 1. ExchangeRate-API.com
- **API –∫–ª—é—á**: `e326cd9f57775c9455ff9ddb`
- **–õ—ñ–º—ñ—Ç**: 1,500 –±–µ–∑–∫–æ—à—Ç–æ–≤–Ω–∏—Ö –∑–∞–ø–∏—Ç—ñ–≤/–º—ñ—Å—è—Ü—å
- **–û–Ω–æ–≤–ª–µ–Ω–Ω—è**: –©–æ–¥–Ω—è –æ 03:00 UTC
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –ü—Ä–∞—Ü—é—î

### 2. –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è (.env)
```bash
EXCHANGE_RATE_PROVIDER=exchangerate-api
EXCHANGERATE_API_KEY=e326cd9f57775c9455ff9ddb
```

### 3. –ü—ñ–¥—Ç—Ä–∏–º—É–≤–∞–Ω—ñ –≤–∞–ª—é—Ç–∏
- üá∫üá¶ **UAH** (–£–∫—Ä–∞—ó–Ω—Å—å–∫–∞ –≥—Ä–∏–≤–Ω—è) - ‚Ç¥
- üá∫üá∏ **USD** (–î–æ–ª–∞—Ä –°–®–ê) - $
- üáµüá± **PLN** (–ü–æ–ª—å—Å—å–∫–∏–π –∑–ª–æ—Ç–∏–π) - z≈Ç

## üîß –Ø–∫ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏

### –û–Ω–æ–≤–ª–µ–Ω–Ω—è –∫—É—Ä—Å—ñ–≤ –≤—Ä—É—á–Ω—É
```bash
php artisan currency:update-rates
```

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è
–ù–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ –≤ `app/Console/Kernel.php`:
- **–©–æ–¥–Ω—è –æ 16:00** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –∫—É—Ä—Å—ñ–≤
- –ó–∞–ø—É—Å–∫ scheduler: `php artisan schedule:work`

### –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è API
```bash
php test-exchangerate-api.php
```

### –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü—ñ—ó
```bash
php verify-dashboard.php
```

## üìä –ü–æ—Ç–æ—á–Ω—ñ –∫—É—Ä—Å–∏

### –û—Ç—Ä–∏–º–∞–Ω–æ –∑ ExchangeRate-API (06.10.2025)
```
1 USD = 41.3013 UAH
1 USD = 3.6286 PLN  
1 PLN = 11.3822 UAH
```

### –ü—Ä–∏–∫–ª–∞–¥–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü—ñ—ó
- $1,000 USD ‚Üí 41,250.00 UAH ‚úÖ
- 800 PLN ‚Üí 8,400.00 UAH ‚úÖ
- $1,000 USD ‚Üí 3,928.57 PLN ‚úÖ
- 50,000 UAH ‚Üí $1,212.12 USD ‚úÖ

## üóÇÔ∏è –§–∞–π–ª–∏ –æ–Ω–æ–≤–ª–µ–Ω–æ

1. **`.env`** - –¥–æ–¥–∞–Ω–æ API –∫–ª—é—á —Ç–∞ –ø—Ä–æ–≤–∞–π–¥–µ—Ä
2. **`config/currencies.php`** - –¥–æ–¥–∞–Ω–æ exchangerate_api_key
3. **`app/Services/CurrencyService.php`** - –¥–æ–¥–∞–Ω–æ –º–µ—Ç–æ–¥ `fetchFromExchangeRateAPI()`
4. **`app/Console/Commands/UpdateCurrencyRates.php`** - —Å—Ç–≤–æ—Ä–µ–Ω–æ –∫–æ–º–∞–Ω–¥—É Artisan
5. **`app/Console/Kernel.php`** - –¥–æ–¥–∞–Ω–æ –ø–ª–∞–Ω—É–≤–∞–Ω–Ω—è —â–æ–¥–µ–Ω–Ω–æ–≥–æ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è
6. **`docs/multi-currency-guide.md`** - –æ–Ω–æ–≤–ª–µ–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—é

## üìÅ –°–∫—Ä–∏–ø—Ç–∏ –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

- `test-exchangerate-api.php` - —Ç–µ—Å—Ç –∑'—î–¥–Ω–∞–Ω–Ω—è –∑ API ‚úÖ
- `update-rates.php` - –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –∫—É—Ä—Å—ñ–≤ –∑ –≤–∏–≤–æ–¥–æ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ ‚úÖ
- `verify-dashboard.php` - –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—ñ–≤ –¥–∞—à–±–æ—Ä–¥—É ‚úÖ
- `check-rates.php` - –ø–µ—Ä–µ–≥–ª—è–¥ –∫—É—Ä—Å—ñ–≤ —É –ë–î
- `clear-rates-cache.php` - –æ—á–∏—â–µ–Ω–Ω—è –∫–µ—à—É –∫—É—Ä—Å—ñ–≤

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

### ‚úÖ API –∑'—î–¥–Ω–∞–Ω–Ω—è
```
‚úÖ API –ø—Ä–∞—Ü—é—î —É—Å–ø—ñ—à–Ω–æ!
üìä –ö—É—Ä—Å–∏ –≤–∞–ª—é—Ç (1 USD = X):
UAH    –£–∫—Ä–∞—ó–Ω—Å—å–∫–∞ –≥—Ä–∏–≤–Ω—è    41.3013
PLN    –ü–æ–ª—å—Å—å–∫–∏–π –∑–ª–æ—Ç–∏–π     3.6286
EUR    –Ñ–≤—Ä–æ                 0.8532
```

### ‚úÖ –û–Ω–æ–≤–ª–µ–Ω–Ω—è –∫—É—Ä—Å—ñ–≤
```
‚úÖ UAH->USD = 0.024242
‚úÖ UAH->PLN = 0.095238
‚úÖ USD->UAH = 41.250000
‚úÖ USD->PLN = 3.928571
‚úÖ PLN->UAH = 10.500000
‚úÖ PLN->USD = 0.254545
```

### ‚úÖ –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü—ñ—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ–π
```
üë§ –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á: Test User
üí± –ë–∞–∑–æ–≤–∞ –≤–∞–ª—é—Ç–∞: UAH
üí∞ –ó–∞–≥–∞–ª—å–Ω–∏–π –¥–æ—Ö—ñ–¥: 25,200.00 UAH
üìä –ë–∞–ª–∞–Ω—Å: 25,200.00 UAH
‚úÖ –î–æ—Ö–æ–¥–∏ –∑–±—ñ–≥–∞—é—Ç—å—Å—è!
```

## üöÄ –©–æ –¥–∞–ª—ñ?

### –î–ª—è production
1. –û—Ç—Ä–∏–º–∞–π—Ç–µ –≤–ª–∞—Å–Ω–∏–π API –∫–ª—é—á –Ω–∞ [exchangerate-api.com](https://www.exchangerate-api.com/)
2. –ó–∞–º—ñ–Ω—ñ—Ç—å –∫–ª—é—á —É `.env`: `EXCHANGERATE_API_KEY=your_new_key`
3. –ù–∞–ª–∞—à—Ç—É–π—Ç–µ cron –¥–ª—è scheduler:
   ```bash
   * * * * * cd /path/to/project && php artisan schedule:run >> /dev/null 2>&1
   ```

### –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è API
–í—ñ–¥—Å–ª—ñ–¥–∫–æ–≤—É–π—Ç–µ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –∑–∞–ø–∏—Ç—ñ–≤:
- **–õ—ñ–º—ñ—Ç**: 1,500 req/month
- **–ü–æ—Ç–æ—á–Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è**: ~12 –∑–∞–ø–∏—Ç—ñ–≤/–¥–µ–Ω—å (6 –ø–∞—Ä –≤–∞–ª—é—Ç √ó 2)
- **–ú—ñ—Å—è—á–Ω–µ**: ~360 –∑–∞–ø–∏—Ç—ñ–≤ (–±–µ–∑–ø–µ—á–Ω–æ –≤ –º–µ–∂–∞—Ö –ª—ñ–º—ñ—Ç—É)

### –†–æ–∑—à–∏—Ä–µ–Ω–Ω—è
- –î–æ–¥–∞—Ç–∏ EUR (—î–≤—Ä–æ) –≤ —Å–ø–∏—Å–æ–∫ –≤–∞–ª—é—Ç
- –ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è –ø—Ä–∏ –¥–æ—Å—è–≥–Ω–µ–Ω–Ω—ñ 80% –ª—ñ–º—ñ—Ç—É
- –î–æ–¥–∞—Ç–∏ fallback –Ω–∞ –ù–ë–£ API –ø—Ä–∏ –≤–∏—á–µ—Ä–ø–∞–Ω–Ω—ñ –ª—ñ–º—ñ—Ç—É

## üìû –ü—ñ–¥—Ç—Ä–∏–º–∫–∞

### –ü—Ä–æ–±–ª–µ–º–∏ —Ç–∞ –≤–∏—Ä—ñ—à–µ–Ω–Ω—è

#### SSL –ø–æ–º–∏–ª–∫–∞ –Ω–∞ Windows
```php
// –£ CurrencyService.php –≤–∂–µ –¥–æ–¥–∞–Ω–æ:
->withOptions(['verify' => false])
```

#### –°—Ç–∞—Ä—ñ –¥–∞–Ω—ñ –≤ –∫–µ—à—ñ
```bash
php artisan cache:clear
php clear-rates-cache.php
```

#### API –Ω–µ –ø—Ä–∞—Ü—é—î
```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –∑'—î–¥–Ω–∞–Ω–Ω—è
php test-exchangerate-api.php

# –ü–µ—Ä–µ–º–∫–Ω—É—Ç–∏—Å—å –Ω–∞ –ù–ë–£
EXCHANGE_RATE_PROVIDER=nbu
```

## üéâ –ì–æ—Ç–æ–≤–æ!

–ú—É–ª—å—Ç–∏–≤–∞–ª—é—Ç–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –ø–æ–≤–Ω—ñ—Å—Ç—é –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∞ —Ç–∞ –ø—Ä–æ—Ç–µ—Å—Ç–æ–≤–∞–Ω–∞. –ö—É—Ä—Å–∏ –æ–Ω–æ–≤–ª—é—é—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑ ExchangeRate-API.com, –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü—ñ—è –ø—Ä–∞—Ü—é—î –∫–æ—Ä–µ–∫—Ç–Ω–æ.

---

**–î–∞—Ç–∞ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è**: 06.10.2025  
**–í–µ—Ä—Å—ñ—è**: 1.0  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ Production Ready
