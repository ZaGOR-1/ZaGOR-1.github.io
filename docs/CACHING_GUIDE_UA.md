# Посібник з Кешування Сайту

## Огляд
Цей документ описує комплексну стратегію кешування, реалізовану для покращення продуктивності сайту-портфоліо.

## Реалізовані Стратегії Кешування

### 1. Service Worker & PWA (Progressive Web App)

**Технологія**: Vite PWA Plugin з Workbox

**Функції**:
- Автоматична реєстрація service worker
- Офлайн функціональність
- Попереднє кешування ресурсів
- Стратегії кешування під час виконання

**Конфігурація** (`vite.config.js`):
- Стратегія **CacheFirst** для:
  - Google Fonts (кеш на 1 рік)
  - Зображень (кеш на 30 днів)
- Стратегія **StaleWhileRevalidate** для:
  - JavaScript та CSS файлів (кеш на 7 днів)
- Автоматичне оновлення кешу при наявності нового контенту

**Переваги**:
- Швидші повторні візити
- Офлайн доступ до закешованого контенту
- Зменшене навантаження на сервер
- Краща користувацька взаємодія при повільному з'єднанні

### 2. HTTP Заголовки Кешування

**Файл**: `public/.htaccess`

**Тривалість Кешування**:
- **HTML файли**: Без кешування (завжди свіжі)
- **Статичні ресурси** (JS, CSS, зображення з хешами): 1 рік з прапором `immutable`
- **Зображення**: 1 рік
- **Шрифти**: 1 рік
- **PDF**: 1 місяць
- **Manifest**: 1 тиждень

**Функції**:
- Увімкнено GZIP стиснення
- Brotli стиснення для сучасних браузерів
- Правильні Cache-Control заголовки
- Включені заголовки безпеки

**Переваги**:
- Браузер автоматично кешує ресурси
- Зменшене використання трафіку
- Швидше завантаження сторінок
- Краща інтеграція з CDN

### 3. Мемоізація React Компонентів

**Оптимізовані Компоненти**:
- `Header` - Мемоізований з React.memo
- `Hero` - Мемоізований з React.memo
- `About` - Мемоізований з React.memo
- `Skills` - Мемоізований з React.memo
- `Education` - Мемоізований з React.memo
- `Experience` - Мемоізований з React.memo
- `Footer` - Мемоізований з React.memo

**Оптимізація Хуків**:
- `useLocalStorage` - useCallback для setValue
- `useScrollProgress` - useCallback та useMemo для обробників
- `useScrollToSection` - useCallback для функції прокрутки
- `useTranslations` - Новий кастомний хук з useMemo

**Переваги**:
- Запобігає непотрібним повторним рендерам
- Зменшує обчислювальне навантаження
- Плавніша взаємодія з UI
- Краща продуктивність на слабких пристроях

### 4. Resource Hints (Підказки Ресурсів)

**Файл**: `index.html`

**Реалізовані Підказки**:
- `preconnect` - Раннє з'єднання з Google Fonts
- `dns-prefetch` - DNS резолюція для зовнішніх ресурсів
- `preload` - Критичні ресурси (фото профілю)

**Переваги**:
- Швидше завантаження ресурсів
- Зменшена затримка
- Кращий First Contentful Paint (FCP)
- Покращений Largest Contentful Paint (LCP)

## Покращення Продуктивності

### Очікуване Покращення Метрик:
- **Перше Завантаження**: На 20-30% швидше з resource hints та preloading
- **Повторні Візити**: На 60-80% швидше з service worker кешуванням
- **Офлайн Доступ**: Повна функціональність з закешованими ресурсами
- **Розмір Бандла**: Оптимізовано з code splitting та tree shaking
- **Продуктивність Re-render**: Покращення на 40-50% з React мемоізацією

## Використання

### Розробка
```bash
npm run dev
```
Service worker відключений в режимі розробки.

### Production Збірка
```bash
npm run build
```
Service worker генерується автоматично під час збірки.

### Тестування Офлайн
1. Зібрати проект: `npm run build`
2. Переглянути: `npm run preview`
3. Відкрити DevTools > Application > Service Workers
4. Відмітити "Offline" для тестування офлайн функціональності

## Інвалідація Кешу

### Автоматична Інвалідація:
- Service worker перевіряє оновлення при завантаженні сторінки
- Файли з хешами в назвах забезпечують автоматичний cache busting
- HTML ніколи не кешується (завжди отримує найновішу версію)

### Ручне Очищення Кешу:
Користувачі можуть очистити кеш через:
- Налаштування браузера
- DevTools > Application > Clear storage

### Очищення Кешу Розробником:
```javascript
// В консолі браузера
navigator.serviceWorker.getRegistrations().then(registrations => {
  registrations.forEach(registration => registration.unregister());
});
```

## Підтримка Браузерів

- **Service Workers**: Chrome 45+, Firefox 44+, Safari 11.1+, Edge 17+
- **Cache API**: Всі сучасні браузери
- **Workbox**: Всі браузери з підтримкою service worker

## Моніторинг

### Перевірка Статусу Service Worker:
1. Відкрити DevTools
2. Перейти на вкладку Application
3. Натиснути Service Workers
4. Побачити статус реєстрації та закешовані ресурси

### Верифікація Кешування:
1. Відкрити DevTools > вкладка Network
2. Перезавантажити сторінку
3. Шукати "(from ServiceWorker)" або "(disk cache)" в колонці Size

## Найкращі Практики

1. **Завжди тестуйте офлайн функціональність** після розгортання
2. **Моніторте розміри кешу** щоб запобігти надмірному використанню пам'яті
3. **Оновлюйте версію кешу** при внесенні великих змін
4. **Тестуйте на мобільних пристроях** для реальної продуктивності
5. **Використовуйте Lighthouse** для вимірювання покращень продуктивності

## Вирішення Проблем

### Service Worker не реєструється:
- Перевірте, чи працює на HTTPS або localhost
- Очистіть кеш браузера та спробуйте знову
- Перевірте консоль на наявність помилок

### Ресурси не кешуються:
- Перевірте, що .htaccess обслуговується Apache
- Перевірте заголовки кешу в DevTools браузера
- Переконайтеся, що процес збірки генерує файли з хешами

### Показується застарілий контент:
- Service worker оновлюється автоматично, але потребує перезавантаження сторінки
- Користувачам може знадобитися закрити всі вкладки та відкрити знову
- Розгляньте реалізацію сповіщення про оновлення

## Майбутні Покращення

Потенційні покращення:
1. IndexedDB кешування для великих даних
2. Background sync для офлайн форм
3. Push сповіщення для оновлень
4. Prefetching для передбачуваної навігації
5. Lazy loading зображень з blur placeholders

## Пов'язані Файли

- `/vite.config.js` - PWA та конфігурація збірки
- `/public/.htaccess` - HTTP заголовки кешування
- `/src/main.jsx` - Реєстрація service worker
- `/src/hooks/` - Оптимізовані React хуки
- Всі файли компонентів - Мемоізовані компоненти

## Ресурси

- [Документація Workbox](https://developers.google.com/web/tools/workbox)
- [Vite PWA Plugin](https://vite-plugin-pwa.netlify.app/)
- [Web.dev Посібник з Кешування](https://web.dev/http-cache/)
- [Оптимізація React](https://react.dev/reference/react/memo)
